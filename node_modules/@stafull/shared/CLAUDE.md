# CLAUDE.md - StaFull Agent Instructions
## MANDATORY REFERENCE BEFORE ANY WORK
**Version:** 4.0 | **Updated:** 2026-01-21 | **Status:** ENFORCED

---

## ‚ö†Ô∏è MANDATORY PRE-WORK PROTOCOL

**BEFORE making ANY changes, designs, builds, or decisions, you MUST:**

1. **READ** all files in `stafull-shared/docs/rules/`:
   - `DESIGN-RULES.md` - Typography, colors, spacing, shadows, etc.
   - `BUILD-RULES.md` - Code standards, patterns, workflow
   - `ARCHITECTURE-RULES.md` - Repos, ports, stack, data flow
   - `DECISIONS-LOG.md` - All finalized decisions

2. **VERIFY** your changes comply with ALL rules

3. **UPDATE** `DECISIONS-LOG.md` when changes are approved

**FAILURE TO FOLLOW THIS PROTOCOL WILL RESULT IN REJECTED WORK.**

---

## üìÅ MANDATORY REFERENCE FILES

```
stafull-shared/docs/rules/
‚îú‚îÄ‚îÄ DESIGN-RULES.md       # Colors, typography, spacing, shadows
‚îú‚îÄ‚îÄ BUILD-RULES.md        # Code standards, patterns, workflow
‚îú‚îÄ‚îÄ ARCHITECTURE-RULES.md # Repos, ports, stack, data flow
‚îî‚îÄ‚îÄ DECISIONS-LOG.md      # All finalized decisions (update on approval)
```

### Source of Truth Hierarchy
1. `stafull-design-system/src/stafull-system.css` - **AUTHORITATIVE** design tokens (HIGHEST)
2. `stafull-shared/src/tokens/tokens.css` - CSS token definitions (must match design-system)
3. `stafull-shared/src/components/components.css` - Component classes
4. `stafull-shared/src/components/StafullComponents.tsx` - React/JSX reference
5. `stafull-shared/docs/rules/*.md` - Rule documentation
6. Conversation decisions - Must be logged to DECISIONS-LOG.md

---

## üö´ ABSOLUTE PROHIBITIONS

### Design
| Prohibition | Reason |
|-------------|--------|
| Font weights 300, 800, 900 | Only 400, 500, 600, 700 allowed |
| Red in shadows | Black/neutral only: `rgba(0,0,0,...)` |
| Focus rings > 1px | Exactly 1px required |
| Focus/hover offset > 0px | Must be exactly 0px |
| Glow effects on glossy elements | Use sheen overlay only |
| Emojis in UI | SVG icons only |
| Non-scale spacing | Only 4/6/10/14/18/30/45/90 px |
| Non-scale timing | Only 100/200/300 ms |
| Other fonts | Montserrat only |

### Build
| Prohibition | Reason |
|-------------|--------|
| Band-aid fixes | Root-level changes only |
| `<form>` in login | Use `<div>` with onClick |
| `taskkill /F /IM node.exe` | Kills Claude Code |
| Hardcoded values | Use CSS tokens |
| Duplicate definitions | Single source of truth |

---

## ‚úÖ REQUIRED PATTERNS

### CSS
```css
/* Typography */
font-family: var(--font-family);
font-weight: var(--font-weight-bold);

/* Colors */
color: var(--red);
background: var(--gradient-red);

/* Spacing */
padding: var(--space-4);
gap: var(--space-5);

/* Shadows (BLACK ONLY) */
box-shadow: var(--shadow-md);

/* Focus (1px red, 0 offset) */
outline: var(--focus-ring);       /* 1px solid var(--sf-red) */
outline-offset: var(--focus-offset); /* 0px */

/* Hover States (1px red, 0 offset) */
.element:hover {
  outline: 1px solid var(--accent);
  outline-offset: 0;
}

/* Transitions */
transition: all var(--transition-base);
```

### JavaScript
```javascript
// Console logging - wrap in DEV check
if (import.meta.env.DEV) console.log('[PREFIX] message', data);
```

---

## üèóÔ∏è REPOSITORY STRUCTURE

```
C:\StaFull\
‚îú‚îÄ‚îÄ stafull-shared/           # SOURCE OF TRUTH
‚îÇ   ‚îú‚îÄ‚îÄ docs/rules/           # All rule files
‚îÇ   ‚îú‚îÄ‚îÄ src/tokens/tokens.css # CSS tokens
‚îÇ   ‚îú‚îÄ‚îÄ assets/logos/         # SVG logos (12 files)
‚îÇ   ‚îî‚îÄ‚îÄ CLAUDE.md             # This file
‚îú‚îÄ‚îÄ stafull-core-engine/      # API, database
‚îú‚îÄ‚îÄ stafull-portal-hq/        # Holdings admin
‚îú‚îÄ‚îÄ stafull-portal-franchise/ # Owner + manager
‚îú‚îÄ‚îÄ stafull-portal-driver/    # Driver app
‚îî‚îÄ‚îÄ stafull-portal-customer/  # Customer portals
```

### Port Assignments
| Service | Port | Command |
|---------|------|---------|
| core-engine API | 3001 | `npm run dev` |
| portal-hq | 5174 | `npm run dev` |
| portal-franchise | 5175 | `npm run dev` |
| portal-driver | 5176 | `npm run dev` |
| portal-customer | 5177 | `npm run dev` |

---

## üë§ TEST CREDENTIALS

**Password for ALL accounts:** `pass`

| Role | Email |
|------|-------|
| Holdings Admin | admin@test.com |
| Franchise Owner | owner@test.com |
| Manager | manager@test.com |
| Driver | driver@test.com |
| Customer | customer@test.com |
| Employer | employer@test.com |
| Employee | employee@test.com |
| Investor | investor@test.com |
| SBA Lender | lender@test.com |

---

## üìã QUICK REFERENCE

### Design Tokens (Source: stafull-design-system)
| Category | Token | Value |
|----------|-------|-------|
| Page Background | `--sf-bg-page` | #1e1f22 (LIGHTER than cards) |
| Card Top | `--sf-card-top` | #131416 |
| Card Bottom | `--sf-card-bottom` | #0a0b0d |
| Card Radius | `--sf-radius-card` | 14px |
| Gap | `--sf-gap` | 12px |
| Brand Red | `--sf-red` | #a30000 |
| Button Radius | `--sf-radius-button` | 8px |
| Button Padding | | 10px 18px |
| Button Font Size | | 13px |
| Pill Radius | `--sf-radius-pill` | 999px |
| Pill Font Size | | 10px |
| Pill Gap | | 4px |
| Progress Height | | 10px |
| Text Secondary | `--sf-text-secondary` | rgba(255,255,255,0.85) |
| Text Muted | `--sf-text-muted` | rgba(255,255,255,0.6) |

### Fuel Colors (Source: stafull-design-system)
| Fuel | Token | Hex |
|------|-------|-----|
| Diesel | `--sf-diesel` | #31b34a |
| Regular | `--sf-regular` | #f2c94c |
| Premium | `--sf-premium` | #d06363 |
| DEF | `--sf-def` | #4a7ce8 |

### Card Shadow (3-layer)
```css
--sf-shadow-card:
  0 25px 50px rgba(0,0,0,0.8),
  0 10px 20px rgba(0,0,0,0.6),
  0 1px 0 rgba(255,255,255,0.06) inset;
```

### Card Sheen (0.07 opacity)
```css
.sf-card::before {
  background: linear-gradient(180deg, rgba(255,255,255,0.07) 0%, transparent 100%);
  height: 50%;
}
```

### Glossy Shadow (Source: stafull-design-system)
```css
--sf-shadow-glossy:
  0 8px 16px rgba(0,0,0,0.5),
  0 1px 0 rgba(255,255,255,0.2) inset;
```

### Glossy Sheen Overlay
```css
.sf-glossy::before {
  background: linear-gradient(180deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.08) 40%, transparent 70%);
}
```

### Spacing Scale
| Token | Value |
|-------|-------|
| --space-1 | 4px |
| --space-2 | 6px |
| --space-3 | 10px |
| --space-4 | 14px |
| --space-5 | 18px |
| --space-6 | 30px |
| --space-7 | 45px |
| --space-8 | 90px |

---

## üîÑ UPDATE PROTOCOL

When changes are approved:

1. **Make the change** at ROOT level (tokens.css or rules/*.md)
2. **Log the decision** in `DECISIONS-LOG.md` with timestamp
3. **Remove overwritten code** - no deprecated code left behind
4. **Commit** with conventional message: `feat:`, `fix:`, `docs:`, `refactor:`

---

## üìú LEGAL

- **Owner:** Donald B. Havery (NEVER "Don" or "Don Havery")
- **Entity:** StaFull Holdings LLC (Delaware)
- All customer data and IP owned by HQ

---

## üìä CURRENT STATUS (2026-01-21)

### Repos on GitHub (all use main branch)
| Repo | Status |
|------|--------|
| stafull-shared | Complete - Design System v2.0 |
| stafull-2026 | Landing page + Dashboard |
| stafull-core-engine | Complete |
| stafull-portal-hq | UI Complete, needs API |
| stafull-portal-franchise | UI Complete, needs API |
| stafull-portal-driver | Complete |
| stafull-portal-customer | Complete (33 pages) |

---

**THIS FILE IS THE ENTRY POINT. READ THE RULES. FOLLOW THE RULES. NO EXCEPTIONS.**
