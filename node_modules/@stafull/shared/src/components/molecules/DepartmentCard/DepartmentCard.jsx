/**
 * DepartmentCard Molecule
 * Navigation card for dashboard card grids
 * Displays icon, title, stat value, and optional alert count
 */

import { Icon } from '../../atoms/Icon';
import styles from './DepartmentCard.module.css';
import { cn } from '../../../utils/cn';

export function DepartmentCard({
  icon,
  title,
  stat,
  statLabel,
  alertCount,
  badge,
  highlight = false,
  showChevron = false,
  disabled = false,
  href,
  onClick,
  className,
  iconPaths,
}) {
  const content = (
    <>
      {alertCount > 0 && (
        <span className={styles.alertBadge}>
          {alertCount > 99 ? '99+' : alertCount}
        </span>
      )}

      {badge && (
        <span className={styles.badge}>{badge}</span>
      )}

      <div className={styles.iconWrapper}>
        <Icon name={icon} size="lg" iconPaths={iconPaths} />
      </div>

      <span className={styles.title}>{title}</span>

      {stat && (
        <div className={styles.statRow}>
          <span className={styles.stat}>{stat}</span>
          {statLabel && <span className={styles.statLabel}>{statLabel}</span>}
        </div>
      )}

      {showChevron && (
        <div className={styles.chevron}>
          <Icon name="chevron-right" size="sm" iconPaths={iconPaths} />
        </div>
      )}
    </>
  );

  const cardClasses = cn(
    styles.card,
    highlight && styles.highlight,
    disabled && styles.disabled,
    className
  );

  if (disabled) {
    return <div className={cardClasses}>{content}</div>;
  }

  if (href) {
    return (
      <a href={href} className={cardClasses}>
        {content}
      </a>
    );
  }

  if (onClick) {
    return (
      <button type="button" onClick={onClick} className={cardClasses}>
        {content}
      </button>
    );
  }

  return <div className={cardClasses}>{content}</div>;
}

export default DepartmentCard;
